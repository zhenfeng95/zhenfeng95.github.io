---
title: ç½‘ç«™ä¸Šçº¿éƒ¨ç½²æµç¨‹
type: process
order: 1
---

## ä¸€ã€ç½‘ç«™è¿è¡Œæœºåˆ¶

### 1ã€åè¯è§£é‡Š

#### åŸŸå

> -   www.baidu.com
> -   www.taobao.com
> -   www.qq.com

> åŸŸåä¿—ç§°ç½‘å€ï¼Œæ˜¯ç”±ä¸€ä¸²ç”¨ç‚¹åˆ†éš”çš„åå­—ç»„æˆï¼Œç”¨äºæ ‡è¯†äº’è”ç½‘ä¸Šçš„è®¡ç®—æœºã€‚
> åŸæœ¬ç”¨äºæ ‡è¯†äº’è”ç½‘ä¸Šè®¡ç®—æœºä½¿ç”¨çš„æ˜¯ IP åœ°å€ï¼Œä½†æ˜¯ç”±äº IP åœ°å€ä¸ä¾¿äºè®°å¿†ï¼Œæ‰€ä»¥äººä»¬ä¾¿è®¾è®¡å‡ºæ¥æ¯”è¾ƒå®¹æ˜“è®°å¿†çš„åŸŸåï¼Œç„¶åé€šè¿‡ DNS å°†åŸŸåå’Œ IP åœ°å€å…³è”ï¼Œè¿™æ ·äººä»¬ä¾¿å¯ä»¥é€šè¿‡è®°å¿†åŸŸåç›´æ¥è®¿é—®åˆ°å¯¹åº”çš„è®¡ç®—æœºã€‚

#### DNS æœåŠ¡å™¨

> DNS (Domain Name System)ï¼Œå¯ä»¥ç†è§£ä¸ºäº’è”ç½‘ä¸Šçš„ä¸€é¡¹æœåŠ¡ï¼Œä»–å¯ä»¥å°†åŸŸåè½¬æ¢æˆå…¶å¯¹åº”çš„ IP åœ°å€ã€‚
> å¯ä»¥å°†å…¶ç†è§£ä¸ºå­—å…¸ï¼Œå­—å…¸ä¸­å­˜å‚¨çš„å°±æ˜¯åŸŸåå’Œ IP åœ°å€ä¸€ä¸€å¯¹åº”çš„é”®å€¼å¯¹ã€‚
> æœ¬åœ° hosts æ–‡ä»¶
> windows: c:\\windows\\system32\\drivers\\etc\\hosts
> mac: /etc/hosts

#### æœåŠ¡å™¨

> æœåŠ¡å™¨å…¶å®å°±æ˜¯ä¸€å°è®¡ç®—æœºï¼Œä½†æ˜¯è¿™å°è®¡ç®—æœºå¹¶å’Œæˆ‘ä»¬è‡ªå·±çš„çš„ PC ä¸ä¸€æ ·ï¼Œä¸æ˜¯æ—¥å¸¸ä½¿ç”¨çš„ï¼Œè€Œæ˜¯æä¾›æŸé¡¹äº’è”ç½‘æœåŠ¡çš„ã€‚
> æ¯”å¦‚ web æœåŠ¡å™¨ï¼Œèƒ½ä¸ºæˆ‘ä»¬æä¾›ç½‘é¡µæœåŠ¡ï¼Œemail æœåŠ¡å™¨ï¼Œèƒ½ä¸ºæˆ‘ä»¬æä¾›ç”µå­é‚®ä»¶æœåŠ¡ï¼ŒFTP æœåŠ¡å™¨èƒ½ä¸ºæˆ‘ä»¬æä¾›æ–‡ä»¶å­˜å‚¨æœåŠ¡ç­‰ç­‰ã€‚
> ä¸ºè®¡ç®—æœºå®‰è£…ä¸åŒçš„æœåŠ¡åº”ç”¨ç¨‹åºï¼Œå³å¯æä¾›ç›¸åº”çš„æœåŠ¡ã€‚
> å¸¸è§çš„ web æœåŠ¡åº”ç”¨ç¨‹åºï¼š Apacheã€Nginxã€IISã€Node.js

### 2ã€ ç½‘ç«™è¯·æ±‚æµç¨‹ï¼ˆç®€åŒ–ç‰ˆï¼‰

#### é™æ€é¡µé¢

ç½‘é¡µåªè¯·æ±‚å’Œå“åº”ç®€å•çš„ HTMLã€CSSã€JavaScript æ–‡ä»¶ï¼Œæœªå’ŒæœåŠ¡ç«¯è¿›è¡Œä»»ä½•æ•°æ®é€šä¿¡ã€‚è¿™æ ·çš„é¡µé¢å«åšé™æ€é¡µé¢ã€‚

#### åŠ¨æ€é¡µé¢

é¡µé¢å†…æœ‰å’ŒæœåŠ¡å™¨è¿›è¡Œæ•°æ®é€šä¿¡ï¼Œè¿™æ ·çš„é¡µé¢å«åšåŠ¨æ€é¡µé¢ã€‚

#### å‰åç«¯åˆ†ç¦»çš„é¡µé¢

> å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸­ï¼Œé¡µé¢ä¸­çš„æ•°æ®æ¸²æŸ“æ˜¯åœ¨æµè§ˆå™¨ä¸­å®Œæˆçš„ã€‚

å‰åç«¯åˆ†ç¦»çš„é¡µé¢è¯·æ±‚åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š é™æ€é¡µé¢è¯·æ±‚ + ajax æ•°æ®è¯·æ±‚

![image](index.assets/1748243726987.png)

![image](index.assets/1748243333844.png)

#### å‰åç«¯ä¸åˆ†ç¦»çš„é¡µé¢

> å‰åç«¯ä¸åˆ†ç¦»çš„é¡¹ç›®ä¸­ï¼Œé¡µé¢ä¸­çš„æ•°æ®æ¸²æŸ“æ“ä½œæ˜¯åœ¨æœåŠ¡å™¨ç«¯å®Œæˆçš„ã€‚

å‰åç«¯ä¸åˆ†ç¦»çš„é¡µé¢ä¸€æ¬¡è¯·æ±‚å°±èƒ½å®Œæˆã€‚

![image](index.assets/1748241289183.png)

## äºŒã€ç½‘ç«™ä¸Šçº¿éƒ¨ç½²æµç¨‹

### 1ã€æœåŠ¡å™¨è´­ä¹°

å›½å†…æœåŠ¡å™¨ï¼š é˜¿é‡Œäº‘ ECS(Elastic Compute Service)ï¼Œè…¾è®¯äº‘ CVM(Cloud Virtual Machine) ç­‰
å›½å¤–æœåŠ¡å™¨ï¼š æ—¥æœ¬ [Vultr](https://www.vultr.com/), ç¾å›½ Linode, è°·æ­Œäº‘ï¼Œå¾®è½¯ Azureï¼Œäºšé©¬é€Š AWS ç­‰
è¿™ä¸€æ­¥éœ€è¦åˆ›å»ºå¥½æœåŠ¡å™¨å®ä¾‹ï¼Œåˆ†é…å¥½å¤–ç½‘ IP åœ°å€ã€‚

### 2ã€åŸŸåè´­ä¹°

å›½å†…ï¼š ä¸‡ç½‘ï¼ˆé˜¿é‡Œï¼‰ã€è…¾è®¯ç­‰
å›½å¤–ï¼š Godaddy

### 3ã€åŸŸåè§£æï¼ˆé…ç½® DNSï¼‰

æ³¨å†Œå¥½åŸŸåä¹‹åéœ€è¦å°†åŸŸåæ˜ å°„åˆ°è‡ªå·±æœåŠ¡å™¨å¯¹åº”çš„ IP åœ°å€ï¼Œè¿™æ ·åˆ«äººæ‰èƒ½é€šè¿‡åŸŸåè®¿é—®åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ã€‚
è¿™ä¸ªæ­¥éª¤å«åšåŸŸåè§£æï¼Œé€šè¿‡åŸŸåæœåŠ¡å•†æä¾›çš„åå°å°±å¯ä»¥æ“ä½œï¼Œä¸€èˆ¬åŸŸåè§£æéƒ½ä¼šæœ‰å»¶è¿Ÿï¼Œä¸æ˜¯å³æ—¶ç”Ÿæ•ˆçš„ã€‚

### 4ã€æœåŠ¡å™¨ç¯å¢ƒæ­å»º

**é…ç½®ç¯å¢ƒä¹Ÿå¯ä»¥å‚è€ƒ[Docker](/website/docker/)ï¼Œéƒ¨ç½²æ›´æ–¹ä¾¿**

æ•°æ®åº“ç¯å¢ƒï¼šç”±äºä½¿ç”¨å‘½ä»¤å®‰è£… Mongodbï¼ŒMySql æ•°æ®åº“å®¹æ˜“å‡ºç°å„ç§å„æ ·çš„é—®é¢˜ï¼Œå»ºè®®ç”¨ Docker æ‹‰å–é•œåƒå®‰è£…ï¼Œç”¨ docker compose å»ç®¡ç†

redis æœåŠ¡ï¼šå»ºè®®ç”¨ Docker æ‹‰å–é•œåƒå®‰è£…

Node é¡¹ç›®ï¼šæ‰“åŒ…æˆ Docker é•œåƒï¼Œåœ¨é¡¹ç›®ä¸­åˆ›å»º Dockerfile æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹åŒ…æ‹¬æ‹‰å–é•œåƒï¼Œä¸‹è½½ä¾èµ–ï¼Œè¿è¡Œé¡¹ç›®ï¼Œåœ¨ jenkins ä¸­é…ç½® shell è„šæœ¬æ–‡ä»¶ï¼Œæˆ–è€…åœ¨æœåŠ¡å™¨ä¸Šæ‰¾ä¸ªç›®å½•é…ç½® shell æ–‡ä»¶ï¼Œå…·ä½“å‚è€ƒä¸‹é¢çš„è‡ªåŠ¨åŒ–éƒ¨ç½²

nginx å’Œ node å¯ä»¥ç›´æ¥åœ¨å®¿ä¸»æœºä¸Šè¿›è¡Œä¸‹è½½

é…ç½®æœåŠ¡å™¨ï¼ŒMac ç³»ç»Ÿä¸‹ç›´æ¥ç”¨ç»ˆç«¯å°± ok
windows ä¸‹éœ€è¦ç”¨åˆ° git bash, æˆ–è€…åˆ«çš„å·¥å…·ï¼ˆPuttyï¼‰

```shell
# éœ€è¦ç”¨åˆ°çš„ Linux ç³»ç»Ÿæ“ä½œå‘½ä»¤

# è¿œç¨‹è¿æ¥å‘½ä»¤
ssh root@åŸŸå

# å±•ç¤ºå½“å‰æ–‡ä»¶å¤¹è·¯å¾„
pwd

# åˆ‡æ¢æ–‡ä»¶å¤¹ç›®å½•
cd ç›®å½•è·¯å¾„

# å±•ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸­å†…å®¹
ls

# ç¼–è¾‘æ–‡ä»¶
vim æ–‡ä»¶è·¯å¾„

# ä¼ è¾“æ–‡ä»¶
scp æœ¬åœ°æ–‡ä»¶è·¯å¾„ root@åŸŸå:è¿œç¨‹è·¯å¾„

# è§£å‹æ–‡ä»¶å‘½ä»¤
unzip
```

#### 4.1 å®‰è£… CentOS å¼€å‘äººå‘˜ç›¸å…³åŒ…

```shell
yum groupinstall 'Development tools'
```

#### 4.2 é…ç½®å…å¯†ç™»é™†

åœ¨è‡ªå·±ç”µè„‘ä¸Š ç”Ÿæˆæœ¬åœ° ç§˜é’¥å¯¹ï¼Œå‚è€ƒ[git å¦‚ä½•ç”Ÿæˆå¯†é’¥](/tool/git/)

```shell
# ç”Ÿæˆçš„ä½ç½®
# mac åœ¨ ~/.ssh
# windows åœ¨ C:\users\ä½ çš„ç”¨æˆ·å\.ssh

# åœ¨æœåŠ¡å™¨åˆ›å»ºäº†ä¸€ä¸ª.ssh æ–‡ä»¶å¤¹
mkdir .ssh

# åˆ‡æ¢åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹
cd .ssh

# åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶
touch authorized_keys

# æˆ‘ä»¬æŠŠè‡ªå·±ç”µè„‘ä¸Šçš„ id_rsa.pub æ–‡ä»¶ä¸­çš„å†…å®¹ æ”¾åˆ° authorized_keysæ–‡ä»¶ä¸­
echo "å…¬é’¥å†…å®¹" >> authorized_keys

# é€€å‡ºæœåŠ¡å™¨ï¼Œä¸‹æ¬¡ç›´æ¥å°±èƒ½å…å¯†ç™»é™†äº†
exit
```

#### 4.3 å®‰è£… Nginx

```shell
# æ·»åŠ  Nginx æº
sudo yum install epel-release

# å®‰è£… Nginx
sudo yum install nginx

# å¯åŠ¨ Nginx
nginx

# é…ç½®é˜²ç«å¢™è§„åˆ™
sudo firewall-cmd --permanent --zone=public --add-service=http
sudo firewall-cmd --permanent --zone=public --add-service=https
sudo firewall-cmd --reload
```

#### 4.4 å®‰è£… Node.js

```shell
# yumè‡ªå¸¦æºä¸­æ²¡æœ‰Node.js,æ‰€ä»¥é¦–å…ˆè¦è·å–Node.jsèµ„æºï¼š
curl --silent --location https://rpm.nodesource.com/setup_14.x | bash -

# å®‰è£… Node.js
yum install -y nodejs

# å®‰è£…å®Œæˆä¹‹åä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸ
node -v

# å®‰è£…pm2 node.jsç¨‹åºç®¡ç†å·¥å…·
npm i pm2 -g

# ä½¿ç”¨pm2 å¯åŠ¨node.jsé¡¹ç›®
pm2 start æ–‡ä»¶å

# åœæ­¢
pm2 stop æ–‡ä»¶åæˆ–è€…id

# ä»pm2çš„ç®¡ç†åˆ—è¡¨ä¸­åˆ é™¤
pm2 delete æ–‡ä»¶åæˆ–è€…id
```

#### 4.5 å®‰è£… MySQL

```shell
# ä¸‹è½½å¹¶å®‰è£… MySQL æº
wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm
sudo yum localinstall mysql80-community-release-el7-3.noarch.rpm

# å®‰è£… MySQL
sudo yum install mysql-community-server -y


#å¦‚æœä¸Šä¸€æ­¥æŠ¥è®¤è¯å¯†é’¥çš„é”™ï¼Œé‚£ä¹ˆå°†ï¼š/etc/yum.repos.d/mysql-community.repoä¸­çš„gpgcheckæ”¹ä¸º0
gpgcheck=0

# å¦‚æœä¸Šä¸€æ­¥æŠ¥é”™ æ‰§è¡Œä¸‹é¢çš„è¯­å¥ ä¹‹å å†æ¬¡æ‰§è¡Œä¸€ä¸‹ä¸Šé¢çš„å®‰è£…Mysqlçš„è¯­å¥
sudo yum module disable mysql

# å¯åŠ¨MySQL
sudo systemctl start msyqld

# æ‰¾åˆ°é»˜è®¤å¯†ç 
# MySQLå®‰è£…å®Œæ¯•ä¹‹åä¼šè‡ªåŠ¨è®¾ç½®ä¸€ä¸ªé»˜è®¤å¯†ç ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°é»˜è®¤å¯†ç 
grep 'temporary password' /var/log/mysqld.log

# è¿æ¥åˆ°MySQLæ•°æ®åº“ï¼Œä¿®æ”¹å¯†ç 
mysql -uroot -p
ALTER USER 'root'@'localhost' IDENTIFIED BY 'è¦ä¿®æ”¹çš„å¯†ç ';

# è¿œç¨‹è¿æ¥åˆ°MySQLæ•°æ®åº“ï¼Œå¦‚æœæŠ¥é”™1130-host ... is not allowed to connect to this MySql server
è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æœåŠ¡å™¨ä¸Šå…ˆè¿æ¥åˆ°æ•°æ®åº“ï¼Œç„¶åæŒ‰ç…§ä»¥ä¸‹å‘½ä»¤æ“ä½œ
æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼šSHOW DATABASES;
åˆ‡æ¢åˆ° mysql æ•°æ®åº“ï¼šUSE mysql;
æŸ¥çœ‹ mysql æ•°æ®åº“ä¸­çš„è¡¨ï¼šSHOW TABLES;
ä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªåä¸º user çš„è¡¨ï¼Œå®ƒå­˜å‚¨äº†MySQLç”¨æˆ·çš„ç™»å½•æƒé™ä¿¡æ¯
æŸ¥çœ‹ user è¡¨ä¸­çš„ Host å’Œ User å­—æ®µï¼šSELECT Host, User FROM user;
ä¿®æ”¹ user è¡¨ä¸­çš„ Host å€¼ï¼šUPDATE user SET Host = '%' WHERE User = 'root';
æ‰§è¡Œå®Œååˆ·æ–°æƒé™ï¼Œä½¿æ›´æ”¹ç«‹å³ç”Ÿæ•ˆï¼šFLUSH PRIVILEGES;
é‡æ–°ä½¿ç”¨å¯è§†åŒ–å·¥å…·æµ‹è¯•è¿æ¥

å‚è€ƒæ–‡æ¡£ï¼šhttps://blog.csdn.net/qq_42943927/article/details/147632834
```

### 5ã€ä¸Šä¼ ç½‘ç«™èµ„æº

å¯ä»¥ä½¿ç”¨ `scp` å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥å®‰è£… FTP ï¼ˆvsftpdï¼‰å·¥å…·ã€‚

```shell
scp æœ¬åœ°æ–‡ä»¶ root@åŸŸå:è¿œç¨‹è·¯å¾„

# åœ¨æœåŠ¡å™¨åˆ›å»ºæ–‡ä»¶å¤¹
mkdir /home/nginx/

# æŠŠç½‘é¡µæ–‡ä»¶ç§»åŠ¨åˆ°åˆ›å»ºå¥½çš„æ–‡ä»¶å¤¹é‡Œ
mv ./dist.zip /home/nginx/

# è§£å‹å‹ç¼©æ–‡ä»¶
cd /home/ningx
unzip ./dist.zip

# ä¿®æ”¹æ–‡ä»¶å¤¹åå­—
mv dist admin
# ç»“æœå°±æ˜¯  /home/nginx/admin  è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­æ”¾çš„å°±æ˜¯æˆ‘ä»¬çš„ç½‘é¡µæ–‡ä»¶äº†
```

### 6ã€é…ç½® Nginx

åˆ›å»ºä¸€ä¸ª ilovefe.conf æ–‡ä»¶

```shell
cd /etc/nginx/conf.d

# åˆ›å»ºé…ç½®æ–‡ä»¶
touch ilovefe.conf
vim ilovefe.conf

# æŒ‰ié”® è¿›å‡ºæ’å…¥æ¨¡å¼

# å¤åˆ¶ä¸‹é¢çš„å†…å®¹ï¼Œç²˜è´´è¿›å»

# ä¿å­˜é€€å‡º

# æŒ‰ä¸€ä¸‹escé€€å‡ºç¼–è¾‘æ¨¡å¼

# ç„¶åè¾“å…¥ ä¸‹é¢çš„å†…å®¹ æ•²å›è½¦

:wq
```

ilovefe.conf

```configure
server {
    listen       80;
    server_name  zzf.net.cn;
    location / {
         `  root   /usr/local/src/dist;`
         `  index  index.html index.htm;`
         `  try_files $uri $uri/ /index.html;`
    }
}
```

å®Œæ•´çš„é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼Œå¼€å¯äº† https

```configure
# nginx.conf æˆ– server é…ç½®ä¸­æ·»åŠ 
map $http_user_agent $is_mobile {
    default 0;
    ~*(iphone|ipod|android|blackberry|opera\ mini|windows\sce|palm|mobile) 1;
}

server
{
    listen 80;
    listen 443 ssl;
    listen 443 quic;
    http2 on;
    server_name zzf.net.cn www.zzf.net.cn;
    #

    # root /www/wwwroot/zzf.net.cn/;
    #CERT-APPLY-CHECK--START
    # ç”¨äºSSLè¯ä¹¦ç”³è¯·æ—¶çš„æ–‡ä»¶éªŒè¯ç›¸å…³é…ç½® -- è¯·å‹¿åˆ é™¤
    # include /www/server/panel/vhost/nginx/well-known/zzf.net.cn.conf;
    #CERT-APPLY-CHECK--END

    #SSL-START SSLç›¸å…³é…ç½®ï¼Œè¯·å‹¿åˆ é™¤æˆ–ä¿®æ”¹ä¸‹ä¸€è¡Œå¸¦æ³¨é‡Šçš„404è§„åˆ™
    #error_page 404/404.html;
    #HTTP_TO_HTTPS_START
    set $isRedcert 1;
    if ($server_port != 443) {
        set $isRedcert 2;
    }
    if ( $uri ~ /\.well-known/ ) {
        set $isRedcert 1;
    }
    if ($isRedcert != 1) {
        rewrite ^(/.*)$ https://$host$1 permanent;
    }
    #HTTP_TO_HTTPS_END

    ssl_certificate     /root/.acme.sh/zzf.net.cn_ecc/fullchain.cer;
    ssl_certificate_key /root/.acme.sh/zzf.net.cn_ecc/zzf.net.cn.key;
    # ssl_certificate    /www/server/panel/vhost/cert/zzf.net.cn/fullchain.pem;
    # ssl_certificate_key    /www/server/panel/vhost/cert/zzf.net.cn/privkey.pem;
    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
    ssl_prefer_server_ciphers on;
    ssl_session_tickets on;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    add_header Strict-Transport-Security "max-age=31536000";
    add_header Alt-Svc 'quic=":443"; h3=":443"; h3-29=":443"; h3-27=":443";h3-25=":443"; h3-T050=":443"; h3-Q050=":443";h3-Q049=":443";h3-Q048=":443"; h3-Q046=":443"; h3-Q043=":443"';
    error_page 497  https://$host$request_uri;

    #SSL-END

    #ERROR-PAGE-START  é”™è¯¯é¡µé…ç½®ï¼Œå¯ä»¥æ³¨é‡Šã€åˆ é™¤æˆ–ä¿®æ”¹
    error_page 404 /404.html;
    #error_page 502 /502.html;
    #ERROR-PAGE-END

    #PHP-INFO-START  PHPå¼•ç”¨é…ç½®ï¼Œå¯ä»¥æ³¨é‡Šæˆ–ä¿®æ”¹
    # include enable-php-00.conf;
    #PHP-INFO-END

    #REWRITE-START URLé‡å†™è§„åˆ™å¼•ç”¨,ä¿®æ”¹åå°†å¯¼è‡´é¢æ¿è®¾ç½®çš„ä¼ªé™æ€è§„åˆ™å¤±æ•ˆ
    # include /www/server/panel/vhost/rewrite/zzf.net.cn.conf;
    #REWRITE-END


    # é»˜è®¤æ ¹ç›®å½•æŒ‡å‘å‰å° dist
    root /www/wwwroot/zzf.net.cn/dist;
    index index.html index.htm;

   location / {
     try_files $uri $uri/ /index.html;
     if ($is_mobile = 1) {
          return 301 https://m.zzf.net.cn$request_uri;
      }
    }

     location /webhook {
        proxy_pass http://127.0.0.1:4000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /webhook-admin {
        proxy_pass http://127.0.0.1:4001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /webhook-server {
        proxy_pass http://127.0.0.1:4002;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /webhook-h5 {
        proxy_pass http://127.0.0.1:4003;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /webhook-compc {
        proxy_pass http://127.0.0.1:4005;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /webhook-comkoa {
        proxy_pass http://127.0.0.1:4006;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }


    location ^~ /api/ {
        rewrite ^/api/(.*)$ /api/$1 break;
        proxy_pass http://127.0.0.1:3001;
    }


    #ç¦æ­¢è®¿é—®çš„æ–‡ä»¶æˆ–ç›®å½•
    location ~ ^/(\.user.ini|\.htaccess|\.git|\.env|\.svn|\.project|LICENSE|README.md)
    {
        return 404;
    }

    #ä¸€é”®ç”³è¯·SSLè¯ä¹¦éªŒè¯ç›®å½•ç›¸å…³è®¾ç½®
    location ~ \.well-known{
        allow all;
    }

    #ç¦æ­¢åœ¨è¯ä¹¦éªŒè¯ç›®å½•æ”¾å…¥æ•æ„Ÿæ–‡ä»¶
    if ( $uri ~ "^/\.well-known/.*\.(php|jsp|py|js|css|lua|ts|go|zip|tar\.gz|rar|7z|sql|bak)$" ) {
        return 403;
    }

    location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
    {
        expires      30d;
        error_log /dev/null;
        access_log /dev/null;
    }

    location ~ .*\.(js|css)?$
    {
        expires      12h;
        error_log /dev/null;
        access_log /dev/null;
    }
    access_log  /www/wwwlogs/zzf.net.cn.log;
    error_log  /www/wwwlogs/zzf.net.cn.error.log;
}
```

### 7ã€æ¥å£é¡¹ç›®éƒ¨ç½²æ­¥éª¤

1. ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ mysql æ•°æ®åº“å¯†ç 
2. ä¸Šä¼ é¡¹ç›®å‹ç¼©æ–‡ä»¶åˆ°æœåŠ¡å™¨
3. åœ¨æœåŠ¡å™¨ä¸Šè§£å‹é¡¹ç›®æ–‡ä»¶åˆ° /home/nginx/ilovefeadmin
4. ä¸ºé¡¹ç›®å®‰è£…ä¾èµ–é¡¹ npm i
5. ä¿®æ”¹ mysql æ•°æ®åº“ å¯†ç è§„åˆ™

```mysql
use mysql;
ALTER USER 'root'@'localhost' IDENTIFIED BY 'æ–°å¯†ç ' PASSWORD EXPIRE NEVER;
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'æ–°å¯†ç ';

# æŸ¥çœ‹æ˜¯å¦å·²ç»ä¿®æ”¹æˆåŠŸ
select user,host,plugin from user where user='root';

```

6. åˆ›å»ºæ–°çš„æ•°æ®åº“

```mysql
create database mysite;
```

7. nginx é…ç½®æ–‡ä»¶ä¸­æ·»åŠ åå‘ä»£ç†çš„é…ç½®ï¼š

```

location ^\~ /api/ {
    `  rewrite ^/api/(.\*)$ /api/$1 break;`
    `  proxy\_pass http://127.0.0.1:3001;`
}
```

8. nginx é…ç½®åå°ç®¡ç†ç³»ç»Ÿçš„ç›®å½•ï¼š

```
location /admin {
    `  alias /usr/local/src/admin;`
    `  index index.html index.htm;`
    `  try\_files $uri $uri/ /index.html;`
}
```

9. nginx é…ç½®é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼š

```

location /static/ {
    `  alias /usr/local/src/server/public/static/;`
}
```

## ä¸‰ã€è‡ªåŠ¨åŒ–éƒ¨ç½²

**è‡ªåŠ¨åŒ–éƒ¨ç½²å¸¸ç”¨çš„æ’ä»¶æ˜¯ jenkinsï¼Œå‚è€ƒ[Docker å®‰è£… jenkins](/website/docker/)ï¼Œå¦‚æœä½ ä¸æƒ³å€ŸåŠ© jenkinsï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹è§£å†³æ–¹æ¡ˆ**

é€šè¿‡é…ç½® Webhook + Shell è„šæœ¬ æ¥å®ç°ã€ŒGit æœ‰æœ€æ–°æäº¤æ—¶ï¼Œä»…æ‹‰å–æŒ‡å®šæ–‡ä»¶ã€çš„éƒ¨ç½²éœ€æ±‚
å½“è¿œç¨‹ Git ä»“åº“æœ‰æ–°æäº¤æ—¶ï¼Œåªæ‹‰å–ç‰¹å®šæ–‡ä»¶ï¼ˆå¦‚ /dist/\*\* æˆ– /public/index.htmlï¼‰è€Œä¸æ˜¯æ•´ä¸ªé¡¹ç›®

### 1ã€å‡†å¤‡æ¡ä»¶

-   ä½ å·²æœ‰ Git ä»“åº“ï¼ˆGitHubã€Gitee ç­‰ï¼‰
-   å®å¡”æœåŠ¡å™¨å·²å®‰è£… Gitã€Node.jsã€PM2ï¼ˆå¯é€‰ï¼‰
-   é¡¹ç›®å·²åˆå§‹åŒ–ä¸º Git ä»“åº“ï¼ˆgit clone æ–¹å¼ï¼‰

### 2ã€åˆ›å»ºè‡ªåŠ¨æ‹‰å–è„šæœ¬ï¼ˆåªåŒæ­¥æŒ‡å®šæ–‡ä»¶ï¼‰

#### å‰ç«¯é¡¹ç›®çš„åšæ³•

å‡è®¾å‰ç«¯é¡¹ç›®éƒ¨ç½²åœ¨ /www/wwwroot/zzf.net.cnï¼Œä½ åªæƒ³æ›´æ–°ä»“åº“ä¸­çš„ dist/ åˆ°è¿™ä¸ªç›®å½•
ï¼ˆ1ï¼‰åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæš‚å­˜æ–‡ä»¶ï¼Œæ‹‰å–å®Œæ•´ä»“åº“åˆ°ç¼“å­˜ç›®å½•ï¼Œå¦‚æœæƒ³ä½¿ç”¨ ssh æ–¹å¼æ‹‰å–ä»£ç ï¼Œå¯ä»¥å‚è€ƒ[git](/tool/git/)

```bash
mkdir -p /www/git-temp
cd /www/git-temp
git clone https://github.com/zhenfeng95/mysite.git
```

ï¼ˆ2ï¼‰åˆ›å»ºéƒ¨ç½²è„šæœ¬ /www/deploy/deploy.sh

```bash
#!/bin/bash

# 1. è¿›å…¥ä¸´æ—¶ç›®å½•
cd /www/git-temp/mysite || exit

# 2. æ‹‰å–æœ€æ–°ä»£ç 
echo "Pulling latest code from GitHub..."
git reset --hard HEAD
git clean -df
git pull origin main

# 3. æ‹·è´æŒ‡å®šæ–‡ä»¶ï¼ˆåªåŒæ­¥ dist ç›®å½•ï¼‰
cp -r dist/* /www/wwwroot/zzf.net.cn/dist/

echo "Deploy finished at $(date)"
```

ä¿å­˜åèµ‹æƒï¼š

```bash
chmod +x /www/deploy/deploy.sh
```

å¦‚æœä½ å¸Œæœ›åªæ‹‰å–ç‰¹å®šæ–‡ä»¶ï¼ˆä¾‹å¦‚åªæ‹‰ config/ ç›®å½•æˆ– index.htmlï¼‰ï¼Œå¯ä»¥åœ¨ deploy.sh ä¸­ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š

```bash
git checkout origin/main -- config/
git checkout origin/main -- index.html
```

#### åç«¯é¡¹ç›®çš„åšæ³•

ï¼ˆ1ï¼‰åç«¯é¡¹ç›®éƒ¨ç½²åœ¨/www/wwwroot/community-koaï¼Œç›´æ¥åœ¨/www/wwwroot/ç›®å½•ä¸‹æ‹‰å–ä»£ç ï¼Œåç«¯é¡¹ç›®è¿è¡Œéœ€è¦æ•´ä¸ªä»“åº“

```bash
git clone https://github.com/zhenfeng95/community-koa.git
```

**Docker é•œåƒåšæ³•**

ï¼ˆ2ï¼‰åˆ›å»ºéƒ¨ç½²è„šæœ¬ /www/deploy/deploy-comkoa.shï¼Œè¯¥è„šæœ¬æ–‡ä»¶ä¼šè¯»å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ Dockerfile æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª web_api çš„é•œåƒï¼Œè¿è¡Œé•œåƒå³å¯è®¿é—®åç«¯æœåŠ¡ï¼Œé€šè¿‡ docker ps | grep web_api æŸ¥çœ‹æ˜¯å¦è¿è¡Œ

```shell
#!/bin/bash

# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /www/wwwroot/community-koa || exit

# 2. æ‹‰å–æœ€æ–°ä»£ç 
echo "Pulling latest code from GitHub..."
git pull origin main

CONTAINER="web_api"
PORT=11005
PORT_WEBSOCKET=11007 # å¯åŠ¨websocketæœåŠ¡
image_name="web_api"
tag="1.0"

# å®Œæˆé•œåƒçš„æ„å»º
# docker built -t web_pc:1.0 .
# åé¢çš„.ä»£è¡¨ä½¿ç”¨å·¥ç¨‹ç›®å½•ä¸‹é¢çš„Docker fileæ–‡ä»¶
docker build --no-cache -t ${image_name}:${tag} .

RUNNING=${docker inspect --format="{{ .State.Running}}" $CONTAINER 2 > /dev/null}
# æ¡ä»¶åˆ¤æ–­
if [ ! -n $RUNNING ]; then
	echo "$CONTAINER does not exit"
    return 1
fi

if [ $RUNNING == "false" ]; then
	echo "$CONTAINER is not running"
    return 2
else
	echo "$CONTAINER is running"
    # åˆ é™¤ç›¸åŒåå­—çš„å®¹å™¨
    matchingStarted=$(docker ps --filter="name=$CONTAINER" -q | xargs)
    if [ -n $matchingStarted ]; then
    	docker stop $matchingStarted
    fi

    matching=$(docker ps -a --filter="name=$CONTAINER" -q | xargs)
    if [ -n $matching ]; then
    	docker rm $matching
    fi
fi

echo "RUNNING is ${RUNNING}"

# è¿è¡Œé•œåƒ
# docker run -itd --name $CONTAINER -p $PORT:3002 ${image_name}:${tag}

docker run -d --name $CONTAINER -p $PORT:3002 -p $PORT_WEBSOCKET:3003 ${image_name}:${tag}

echo "Deploy finished at $(date)"

exit 0
```

**æ™®é€š Node é¡¹ç›®åšæ³•**

ï¼ˆ2ï¼‰åˆ›å»ºéƒ¨ç½²è„šæœ¬ /www/deploy/deploy-server.shï¼Œç”¨ pm2 å³å¯è®¿é—®åç«¯æœåŠ¡

```shell
#!/bin/bash

# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /www/wwwroot/mysite-express || exit

# 2. æ‹‰å–æœ€æ–°ä»£ç 
echo "Pulling latest code from GitHub..."
git pull origin main

# 3. å®‰è£…ä¾èµ–
npm install

# 4. é‡å¯PM2åº”ç”¨
pm2 restart server

# 5. ä¿å­˜PM2çŠ¶æ€
pm2 save

echo "Deploy finished at $(date)"

```

### 3ã€åˆ›å»º webhook æ¥æ”¶æœåŠ¡ï¼ˆNode ç¤ºä¾‹ï¼‰

å®‰è£…ä¾èµ–ï¼š

```bash
mkdir -p /www/webhook && cd /www/webhook
npm init -y
npm install express body-parser
```

åˆ›å»º index.jsï¼š

```js
const express = require('express');
const bodyParser = require('body-parser');
const { exec } = require('child_process');

const app = express();
app.use(bodyParser.json());

app.post('/webhook', (req, res) => {
    console.log('Git æ¨é€äº‹ä»¶å·²æ¥æ”¶');
    exec('sh /www/deploy/deploy.sh', (err, stdout, stderr) => {
        if (err) {
            console.error('æ‰§è¡Œå¤±è´¥', stderr);
            return res.status(500).send('error');
        }
        console.log('éƒ¨ç½²æˆåŠŸ', stdout);
        res.send('éƒ¨ç½²æˆåŠŸ');
    });
});

app.listen(4000, '0.0.0.0', () => {
    console.log('Webhook æœåŠ¡å·²è¿è¡Œï¼Œç«¯å£ 4000');
});
```

**åœ¨é˜¿é‡Œäº‘åå°å®‰å…¨ç»„ä¸­çš„å…¥æ–¹å‘ä¸€å®šè¦æ”¾å¼€ 4000 çš„ç«¯å£**
å¯åŠ¨æœåŠ¡ï¼ˆå»ºè®®ç”¨ pm2 ä¿æ´»ï¼‰ï¼š

```bash
npm install -g pm2
pm2 start index.js --name webhook
```

å¯¹äº Docker é•œåƒè¿è¡Œçš„é¡¹ç›®ï¼Œåœ¨åˆ›å»º webhook æ—¶ï¼Œç”±äºæ„å»ºé•œåƒéœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥è¦æå‰ç»™ github è¿”å›çŠ¶æ€

```js
const express = require('express');
const bodyParser = require('body-parser');
const { exec } = require('child_process');

const app = express();
app.use(bodyParser.json());

app.post('/webhook-comkoa', (req, res) => {
    console.log('Git æ¨é€äº‹ä»¶å·²æ¥æ”¶');
    res.send('å·²æ¥æ”¶ï¼Œæ­£åœ¨åå°éƒ¨ç½²ä¸­...');
    exec('sh /www/deploy/deploy-comkoa.sh', (err, stdout, stderr) => {
        if (err) {
            console.error('æ‰§è¡Œå¤±è´¥', stderr);
            return;
            // return res.status(500).send('error')
        }
        console.log('éƒ¨ç½²æˆåŠŸ', stdout);
        // res.send('åå°éƒ¨ç½²æˆåŠŸ')
    });
});

app.listen(4006, '0.0.0.0', () => {
    console.log('Webhook æœåŠ¡å·²è¿è¡Œï¼Œç«¯å£ 4006');
});
```

### 4ã€åœ¨ GitHub/Gitee ä¸­é…ç½® Webhook

å‰å¾€ä»“åº“è®¾ç½®ï¼š

1. æ‰¾åˆ°å…·ä½“é¡¹ç›®ï¼Œè¿›å…¥ Settings > Webhooks > Add Webhookã€‚
2. Payload URL: http://ä½ çš„æœåŠ¡å™¨å…¬ç½‘ IP:4000/webhookï¼ˆæ³¨æ„å…¬ç½‘å¯è®¿é—®ï¼‰
3. Content type: application/json
4. Secret: ï¼ˆå¯é€‰ï¼Œç”¨äºæ ¡éªŒï¼‰
5. äº‹ä»¶ç±»å‹ï¼šåªé€‰ push
6. ä¿å­˜

## å››ã€ç”³è¯·å…è´¹è¯ä¹¦æ–‡ä»¶

å‚è€ƒæ–‡æ¡£ï¼š[acme.sh](https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E)

### 1ã€å®‰è£… acme.sh

```bash
curl https://get.acme.sh | sh -s email=my@example.com
```

å®‰è£…æˆåŠŸåé‡æ–°ç™»å½•ç»ˆç«¯ï¼Œæˆ–è€…æ‰§è¡Œï¼š

```bash
source ~/.bashrc
```

ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```bash
acme.sh --version
```

### 2ã€ä½¿ç”¨ DSAPI çš„æ–¹å¼

æ‰“å¼€é“¾æ¥ï¼š[dsnpi](https://github.com/acmesh-official/acme.sh/wiki/dnsapi)
åœ¨è¿™ä¸ªé¡µé¢ä¸­æ‰¾åˆ° Aliyunï¼Œåœ¨é˜¿é‡Œäº‘åå°åˆ›å»ºå­ç”¨æˆ·ï¼Œè·å–åˆ° Ali_Key å’Œ Ali_Secretï¼Œç„¶ååˆ°æ§åˆ¶å°è¾“å…¥ä¸‹é¢ä¸¤æ¡å‘½ä»¤

æ­¥éª¤ä¸€ï¼šè¿›å…¥é˜¿é‡Œäº‘ RAM æ§åˆ¶å°

â€‹ ç™»å½•é˜¿é‡Œäº‘åå° [RAM æ§åˆ¶å°](https://ram.console.aliyun.com/users)

â€‹ å·¦ä¾§ç‚¹å‡» ç”¨æˆ· â†’ åˆ›å»ºç”¨æˆ·

æ­¥éª¤äºŒï¼šåˆ›å»ºå­ç”¨æˆ·

â€‹ é€‰æ‹© æ™®é€šç”¨æˆ·ï¼ˆRAM ç”¨æˆ·ï¼‰

â€‹ å¡«å†™ç”¨æˆ·åï¼ˆéšä¾¿ï¼Œæ¯”å¦‚ acme-cert-userï¼Œhttps ç­‰ï¼‰

â€‹ å‹¾é€‰ AccessKey è®¿é—®ï¼ˆAccessKey æ–¹å¼ï¼‰

â€‹ ä¸è¦é€‰æ§åˆ¶å°è®¿é—®ï¼Œå¦åˆ™å¤šä½™

â€‹ ç‚¹å‡» ç¡®è®¤ã€‚

æ­¥éª¤ä¸‰ï¼šç»™ç”¨æˆ·æˆæƒ

â€‹ åˆ›å»ºå®Œæˆåï¼Œè¿›å…¥åˆšå»ºå¥½çš„ç”¨æˆ·è¯¦æƒ…é¡µ

â€‹ æ‰¾åˆ° æƒé™ç®¡ç† â†’ æ·»åŠ æƒé™

â€‹ æœç´¢ AliyunDNSFullAccess

â€‹ å‹¾é€‰è¯¥ç­–ç•¥ï¼Œç‚¹å‡» ç¡®å®š

â€‹ è¿™æ ·ï¼Œè¿™ä¸ªç”¨æˆ·å°±æœ‰äº†å¯¹é˜¿é‡Œäº‘ DNS æœåŠ¡çš„å®Œå…¨æ“ä½œæƒé™ã€‚

æ­¥éª¤å››ï¼šç”Ÿæˆ AccessKey

â€‹ åœ¨ç”¨æˆ·è¯¦æƒ…é¡µ â†’ å®‰å…¨è®¾ç½® â†’ AccessKey ç®¡ç†

â€‹ ç‚¹å‡» åˆ›å»º AccessKey

â€‹ ç³»ç»Ÿä¼šç”Ÿæˆ AccessKeyId å’Œ AccessKeySecret

â€‹ è®°å¾—ä¿å­˜ä¸‹æ¥ï¼ŒSecret åªä¼šæ˜¾ç¤ºä¸€æ¬¡ã€‚

æ­¥éª¤äº”ï¼šåœ¨æœåŠ¡å™¨é…ç½®ç¯å¢ƒå˜é‡

â€‹ åœ¨ä½ çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
export Ali_Key="<key>"
export Ali_Secret="<secret>"
```

ä¸ºäº†é•¿æœŸç”Ÿæ•ˆï¼Œå¯ä»¥å†™å…¥ ~/.bashrcï¼š

```bash
echo 'export Ali_Key="ä½ çš„AccessKeyId"' >> ~/.bashrc
echo 'export Ali_Secret="ä½ çš„AccessKeySecret"' >> ~/.bashrc
source ~/.bashrc
```

åˆ‡æ¢ CAï¼šä½¿ç”¨ Let's Encrypt æ›¿ä»£ ZeroSSL

```bash
acme.sh --set-default-ca --server letsencrypt
```

æ­¥éª¤å…­ï¼šæµ‹è¯•

â€‹ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æµ‹è¯•ç”³è¯·è¯ä¹¦ï¼š

â€‹ ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š

```bash
acme.sh --issue --dns dns_ali -d zzf.net.cn -d *.zzf.net.cn
```

â€‹ å¦‚æœæ‰§è¡Œå‘½ä»¤æŠ¥é”™å¯èƒ½æ²¡æ³¨å†Œè´¦å·ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤

```bash
acme.sh --register-account -m your@email.com
```

å¦‚æœé…ç½®æ­£ç¡®ï¼Œacme.sh ä¼šè‡ªåŠ¨åœ¨[é˜¿é‡Œäº‘ DNS](https://dnsnext.console.aliyun.com/authoritative) é‡Œæ·»åŠ  \_acme-challenge.zzf.net.cn è¿™ç§ TXT è®°å½•ï¼Œå¹¶é€šè¿‡éªŒè¯ï¼Œæœ€ç»ˆç”Ÿæˆè¯ä¹¦ã€‚

ğŸš€ åˆ°è¿™ä¸€æ­¥ï¼Œä½ çš„ acme.sh + é˜¿é‡Œäº‘ DNS è‡ªåŠ¨åŒ–ç”³è¯· SSL è¯ä¹¦å°±å¯ä»¥è·‘é€šäº†ã€‚

å¦‚æœç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶ä¸åœ¨ nginx é…ç½®ä¸­çš„è·¯å¾„æ—¶ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ‰èƒ½ç¡®ä¿ acme è‡ªåŠ¨ç»­æœŸåçš„æ–‡ä»¶è‡ªåŠ¨åŒæ­¥åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœ nginx é…ç½®çš„è·¯å¾„ç›´æ¥æŒ‡å‘ acme çš„ç›®å½•æ–‡ä»¶ï¼Œåˆ™ä¸éœ€è¦æ‰§è¡Œä»¥ä¸‹çš„æ“ä½œ
nginxï¼š

```shell
acme.sh --install-cert -d yourdomain.com \
--key-file /etc/nginx/ssl/yourdomain.key \
--fullchain-file /etc/nginx/ssl/yourdomain.cer \
--reloadcmd "systemctl reload nginx"
```

å®å¡”é¢æ¿ç”¨æˆ·

å®å¡”ä¸€èˆ¬å­˜æ”¾è¯ä¹¦çš„è·¯å¾„æ˜¯ï¼š

```shell
/www/server/panel/vhost/cert/yourdomain.com/
```

å¯ä»¥è¿™æ ·å®‰è£…ï¼š

```shell
acme.sh --install-cert -d yourdomain.com \
--key-file /www/server/panel/vhost/cert/yourdomain.com/privkey.pem \
--fullchain-file /www/server/panel/vhost/cert/yourdomain.com/fullchain.pem \
--reloadcmd "bt reload"
```

```shell
acme.sh --install-cert -d zzf.net.cn \
--key-file /www/server/panel/vhost/cert/zzf.net.cn/privkey.pem \
--fullchain-file /www/server/panel/vhost/cert/zzf.net.cn/fullchain.pem \
--reloadcmd "bt reload"
```
